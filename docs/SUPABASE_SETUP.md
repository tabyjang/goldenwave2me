# Supabase 연결 가이드

이 가이드를 따라하면 약 15-20분 안에 Supabase 연결을 완료할 수 있습니다.

---

## 목차

1. [Supabase 계정 만들기](#1-supabase-계정-만들기)
2. [새 프로젝트 만들기](#2-새-프로젝트-만들기)
3. [API 키 복사하기](#3-api-키-복사하기)
4. [환경 변수 설정하기](#4-환경-변수-설정하기)
5. [데이터베이스 테이블 만들기](#5-데이터베이스-테이블-만들기)
6. [로컬에서 테스트하기](#6-로컬에서-테스트하기)
7. [GitHub 로그인 설정 (선택)](#7-github-로그인-설정-선택)
8. [Google 로그인 설정 (선택)](#8-google-로그인-설정-선택)
9. [실서버 배포 시 설정](#9-실서버-배포-시-설정)
10. [문제 해결](#10-문제-해결)

---

## 1. Supabase 계정 만들기

### Step 1: Supabase 사이트 접속

브라우저를 열고 주소창에 입력합니다:

```
https://supabase.com
```

### Step 2: 회원가입 버튼 클릭

```
화면 우측 상단에 있는 초록색 버튼을 찾습니다:

┌─────────────────────────────────────────────────────┐
│  Supabase 로고                    [Start your project] ← 이 버튼 클릭
└─────────────────────────────────────────────────────┘
```

### Step 3: 가입 방법 선택

3가지 방법 중 하나를 선택합니다:

```
┌─────────────────────────────────────────┐
│                                         │
│   Sign up for Supabase                  │
│                                         │
│   ┌─────────────────────────────────┐   │
│   │  🐙 Continue with GitHub        │   │  ← 추천 (가장 빠름)
│   └─────────────────────────────────┘   │
│                                         │
│   ┌─────────────────────────────────┐   │
│   │  🔵 Continue with Google        │   │  ← 또는 이것
│   └─────────────────────────────────┘   │
│                                         │
│            ─── or ───                   │
│                                         │
│   Email: [                         ]    │
│   Password: [                      ]    │  ← 또는 이메일로 가입
│                                         │
│   ┌─────────────────────────────────┐   │
│   │         Sign Up                 │   │
│   └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

**GitHub으로 가입하는 경우:**
1. "Continue with GitHub" 클릭
2. GitHub 로그인 화면이 나타남
3. GitHub 아이디/비밀번호 입력
4. "Authorize Supabase" 버튼 클릭

✅ **완료 확인**: 대시보드 화면이 보이면 가입 성공입니다.

---

## 2. 새 프로젝트 만들기

### Step 1: New Project 버튼 찾기

로그인 후 대시보드에서 초록색 버튼을 찾습니다:

```
┌─────────────────────────────────────────────────────────────┐
│  Supabase Dashboard                                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   Your Projects                                             │
│                                                             │
│   ┌───────────────────┐                                     │
│   │                   │                                     │
│   │   + New Project   │  ← 이 버튼 클릭                      │
│   │                   │                                     │
│   └───────────────────┘                                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 2: 프로젝트 정보 입력

새 창이 뜨면 아래 정보를 입력합니다:

```
┌─────────────────────────────────────────────────────────────┐
│  Create a new project                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Organization                                               │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ [Your Name's Organization]              ▼           │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 기본값 그대로 두세요                                       │
│                                                             │
│  Name                                                       │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ my-app                                              │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 영어로 입력 (예: my-shop, my-blog, company-website)        │
│                                                             │
│  Database Password                                          │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ ••••••••••••••••          [Generate a password]     │    │
│  └─────────────────────────────────────────────────────┘    │
│  → "Generate a password" 클릭하면 자동 생성                   │
│  → ⚠️ 이 비밀번호를 메모장에 복사해두세요! 나중에 필요합니다      │
│                                                             │
│  Region                                                     │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ Northeast Asia (Seoul)                  ▼           │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 한국이면 "Seoul" 선택                                     │
│  → 미국이면 "US East" 선택                                   │
│                                                             │
│  Pricing Plan                                               │
│  ○ Free   ← 이것 선택 (무료)                                 │
│  ○ Pro                                                      │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │           Create new project                        │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 3: 생성 완료 대기

"Create new project" 버튼을 클릭하면:

```
┌─────────────────────────────────────────┐
│                                         │
│   Setting up your project               │
│                                         │
│   ████████████░░░░░░░░  60%             │
│                                         │
│   • Setting up database... ✓            │
│   • Configuring API... ✓                │
│   • Finalizing...                       │
│                                         │
└─────────────────────────────────────────┘

약 1-2분 정도 기다립니다.
```

✅ **완료 확인**: 프로젝트 대시보드가 보이면 성공입니다.

---

## 3. API 키 복사하기

### Step 1: 설정 메뉴 찾기

프로젝트 대시보드 왼쪽 메뉴에서 설정을 찾습니다:

```
┌──────────────────┬──────────────────────────────────────────┐
│                  │                                          │
│  📊 Dashboard    │                                          │
│                  │                                          │
│  📝 Table Editor │                                          │
│                  │                                          │
│  🔐 Auth         │                                          │
│                  │                                          │
│  📁 Storage      │                                          │
│                  │                                          │
│  ...             │                                          │
│                  │                                          │
│  ─────────────── │                                          │
│                  │                                          │
│  ⚙️ Project      │  ← 이것 클릭 (맨 아래쪽에 있음)              │
│     Settings     │                                          │
│                  │                                          │
└──────────────────┴──────────────────────────────────────────┘
```

### Step 2: API 메뉴 클릭

Settings 안에서 API를 찾습니다:

```
┌──────────────────┬──────────────────────────────────────────┐
│                  │                                          │
│  ⚙️ SETTINGS     │                                          │
│                  │                                          │
│  General         │                                          │
│                  │                                          │
│  API        ←────│──── 이것 클릭                             │
│                  │                                          │
│  Database        │                                          │
│                  │                                          │
│  Auth            │                                          │
│                  │                                          │
└──────────────────┴──────────────────────────────────────────┘
```

### Step 3: 3가지 값 복사하기

API 페이지에서 3가지 값을 찾아 복사합니다.

**메모장을 열어두고 하나씩 복사하세요:**

```
┌─────────────────────────────────────────────────────────────────┐
│  API Settings                                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Project URL                                                    │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ https://abcdefghijk.supabase.co                    [📋] │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  → 📋 버튼 클릭해서 복사                                          │
│  → 메모장에 붙여넣기 하고 앞에 적어두기:                            │
│    NEXT_PUBLIC_SUPABASE_URL=https://abcdefghijk.supabase.co     │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Project API keys                                               │
│                                                                 │
│  anon  public                                                   │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpX...                [📋] │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  → 📋 버튼 클릭해서 복사                                          │
│  → 메모장에 붙여넣기:                                             │
│    NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1...            │
│                                                                 │
│  service_role  secret  ⚠️ 절대 공개하지 마세요                    │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpX...                [📋] │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  → 📋 버튼 클릭해서 복사                                          │
│  → 메모장에 붙여넣기:                                             │
│    SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1...                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**메모장 결과물 예시:**
```
NEXT_PUBLIC_SUPABASE_URL=https://abcdefghijk.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSI...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSI...
```

---

## 4. 환경 변수 설정하기

### Step 1: 프로젝트 폴더 열기

VS Code나 다른 코드 에디터로 프로젝트 폴더를 엽니다.

### Step 2: .env.local 파일 만들기

프로젝트 최상위 폴더(package.json이 있는 곳)에 `.env.local` 파일을 만듭니다.

**방법 1: 명령어로 만들기**
```bash
# 터미널에서 프로젝트 폴더로 이동 후
cp .env.local.example .env.local
```

**방법 2: 직접 만들기**
1. VS Code 왼쪽 파일 목록에서 우클릭
2. "New File" 선택
3. 파일 이름을 `.env.local` 입력 (점으로 시작!)
4. Enter

### Step 3: 환경 변수 붙여넣기

`.env.local` 파일을 열고 아까 메모장에 복사한 내용을 붙여넣습니다:

```env
# Supabase 설정
NEXT_PUBLIC_SUPABASE_URL=https://abcdefghijk.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...여기에전체키붙여넣기
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...여기에전체키붙여넣기

# 앱 URL (로컬 개발용)
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

⚠️ **주의사항:**
- `=` 앞뒤에 공백 없이 붙여 쓰세요
- 키 값은 한 줄에 다 있어야 합니다 (줄바꿈 X)
- 따옴표 없이 그대로 붙여넣으세요

### Step 4: 파일 저장

`Ctrl + S` (Mac: `Cmd + S`)로 저장합니다.

✅ **완료 확인**:
```
프로젝트 폴더/
├── .env.local          ← 이 파일이 있어야 함
├── .env.local.example
├── package.json
├── ...
```

---

## 5. 데이터베이스 테이블 만들기

### Step 1: SQL Editor 열기

Supabase 대시보드 왼쪽 메뉴에서:

```
┌──────────────────┐
│                  │
│  📊 Dashboard    │
│                  │
│  📝 Table Editor │
│                  │
│  🔷 SQL Editor   │  ← 이것 클릭
│                  │
└──────────────────┘
```

### Step 2: 새 쿼리 만들기

```
┌─────────────────────────────────────────────────────────────┐
│  SQL Editor                                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐                                            │
│  │ + New query │  ← 이 버튼 클릭                             │
│  └─────────────┘                                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 3: SQL 코드 복사 & 붙여넣기

1. 프로젝트의 `supabase/schema.sql` 파일을 엽니다
2. 전체 내용을 복사합니다 (`Ctrl+A` 후 `Ctrl+C`)
3. Supabase SQL Editor에 붙여넣습니다 (`Ctrl+V`)

```
┌─────────────────────────────────────────────────────────────┐
│  SQL Editor                                      [▶ Run]    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1  -- Supabase Database Schema                             │
│  2  -- Run this in Supabase SQL Editor                      │
│  3                                                          │
│  4  -- Create profiles table (extends auth.users)           │
│  5  CREATE TABLE IF NOT EXISTS public.profiles (            │
│  6    id UUID REFERENCES auth.users(id) ON DELETE CASCADE   │
│  7    ...                                                   │
│  8                                                          │
│     (schema.sql 내용이 여기에 보입니다)                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 4: 실행하기

```
우측 상단의 초록색 버튼을 클릭합니다:

┌──────────────────────┐
│  ▶ Run               │  ← 이 버튼 클릭
└──────────────────────┘

또는 키보드: Ctrl + Enter (Mac: Cmd + Enter)
```

### Step 5: 결과 확인

```
┌─────────────────────────────────────────────────────────────┐
│  Success. No rows returned                                  │
│                                                             │
│  ✅ 이 메시지가 보이면 성공!                                   │
└─────────────────────────────────────────────────────────────┘
```

### Step 6: 테이블 확인하기

왼쪽 메뉴에서 Table Editor 클릭:

```
┌──────────────────┬──────────────────────────────────────────┐
│                  │                                          │
│  📝 Table Editor │  Tables                                  │
│       ↑          │                                          │
│    클릭          │  ┌────────────────┐                      │
│                  │  │ profiles       │  ← 이 테이블이 보이면   │
│                  │  └────────────────┘     성공!             │
│                  │                                          │
└──────────────────┴──────────────────────────────────────────┘
```

---

## 6. 로컬에서 테스트하기

### Step 1: 개발 서버 실행

터미널을 열고 프로젝트 폴더에서:

```bash
npm run dev
```

결과:
```
▲ Next.js 16.x.x
- Local: http://localhost:3000

✓ Ready in 2s
```

### Step 2: 회원가입 테스트

1. 브라우저에서 열기: `http://localhost:3000/auth/signup`

2. 정보 입력:
```
┌─────────────────────────────────────────┐
│                                         │
│   Create an account                     │
│                                         │
│   Full Name                             │
│   ┌─────────────────────────────────┐   │
│   │ 홍길동                           │   │
│   └─────────────────────────────────┘   │
│                                         │
│   Email                                 │
│   ┌─────────────────────────────────┐   │
│   │ test@example.com                │   │
│   └─────────────────────────────────┘   │
│                                         │
│   Password                              │
│   ┌─────────────────────────────────┐   │
│   │ ••••••••                        │   │  (6자 이상)
│   └─────────────────────────────────┘   │
│                                         │
│   ┌─────────────────────────────────┐   │
│   │       Create Account            │   │  ← 클릭
│   └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

3. 결과 확인:
   - 성공 메시지가 보이거나
   - 이메일 확인 메시지가 표시됨

### Step 3: 이메일 확인 설정 (개발용)

개발 중에 이메일 확인을 건너뛰려면:

1. Supabase 대시보드 → Authentication → Providers
2. Email 항목 클릭
3. "Confirm email" 토글 OFF

```
┌─────────────────────────────────────────┐
│  Email                                  │
├─────────────────────────────────────────┤
│                                         │
│  Confirm email                          │
│  ┌────┐                                 │
│  │ ○  │  ← OFF로 변경 (개발용)           │
│  └────┘                                 │
│                                         │
│  ⚠️ 실제 서비스에서는 반드시 ON!          │
│                                         │
└─────────────────────────────────────────┘
```

### Step 4: 로그인 테스트

1. 브라우저에서: `http://localhost:3000/auth/signin`
2. 아까 가입한 이메일/비밀번호 입력
3. "Sign In" 클릭
4. 홈페이지로 이동되면 성공!

### Step 5: 사용자 데이터 확인

Supabase 대시보드에서 확인:

**방법 1: Authentication에서 확인**
```
Authentication → Users

┌─────────────────────────────────────────────────────────────┐
│  Users                                                      │
├─────────────────────────────────────────────────────────────┤
│  Email              │ Created           │ Last Sign In     │
│─────────────────────│───────────────────│──────────────────│
│  test@example.com   │ 2024-01-15 10:30  │ 2024-01-15 10:35 │
└─────────────────────────────────────────────────────────────┘
```

**방법 2: Table Editor에서 확인**
```
Table Editor → profiles

┌─────────────────────────────────────────────────────────────┐
│  profiles                                                   │
├─────────────────────────────────────────────────────────────┤
│  id        │ email             │ full_name │ created_at    │
│────────────│───────────────────│───────────│───────────────│
│  uuid...   │ test@example.com  │ 홍길동     │ 2024-01-15... │
└─────────────────────────────────────────────────────────────┘
```

✅ **테스트 완료!** 여기까지 되면 기본 인증이 작동하는 것입니다.

---

## 7. GitHub 로그인 설정 (선택)

GitHub 계정으로 로그인 기능을 추가합니다.

### Step 1: GitHub에서 OAuth App 만들기

1. GitHub 로그인 후 이 주소로 이동:
   ```
   https://github.com/settings/developers
   ```

2. "OAuth Apps" 탭 클릭

3. "New OAuth App" 버튼 클릭

```
┌─────────────────────────────────────────────────────────────┐
│  Register a new OAuth application                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Application name                                           │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ My App                                              │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 아무 이름이나 OK                                          │
│                                                             │
│  Homepage URL                                               │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ http://localhost:3000                               │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 개발 중이니까 localhost                                   │
│                                                             │
│  Application description (optional)                         │
│  ┌─────────────────────────────────────────────────────┐    │
│  │                                                     │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 비워둬도 됨                                               │
│                                                             │
│  Authorization callback URL  ⚠️ 중요!                        │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ https://abcdefghijk.supabase.co/auth/v1/callback    │    │
│  └─────────────────────────────────────────────────────┘    │
│  → Supabase URL + /auth/v1/callback                         │
│  → 본인의 Supabase URL을 넣어야 함!                           │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │           Register application                      │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 2: Client ID와 Secret 복사

앱 생성 후 페이지에서:

```
┌─────────────────────────────────────────────────────────────┐
│  My App                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Client ID                                                  │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ Ov23liAbCdEfGhIjKlMn                            [📋]│    │
│  └─────────────────────────────────────────────────────┘    │
│  → 복사해서 메모장에 저장                                      │
│                                                             │
│  Client secrets                                             │
│  You need a client secret to authenticate as the app.       │
│                                                             │
│  ┌──────────────────────────────────────┐                   │
│  │  Generate a new client secret        │  ← 클릭           │
│  └──────────────────────────────────────┘                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

"Generate a new client secret" 클릭 후:

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  Client secrets                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx        [📋]│    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ⚠️ 이 값은 한 번만 보여줍니다! 반드시 복사해두세요!              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**메모장 결과:**
```
GitHub Client ID: Ov23liAbCdEfGhIjKlMn
GitHub Client Secret: ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### Step 3: Supabase에 등록

1. Supabase 대시보드 → Authentication → Providers

2. GitHub 항목 찾아서 클릭 (확장)

```
┌─────────────────────────────────────────────────────────────┐
│  Auth Providers                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Email                                              Enabled │
│                                                             │
│  GitHub                                            Disabled │
│  └─────────────────────────────────────────────────────────│
│    │                                                       │
│    │  Enable Sign in with GitHub                           │
│    │  ┌────┐                                               │
│    │  │ ●  │  ← ON으로 변경                                 │
│    │  └────┘                                               │
│    │                                                       │
│    │  Client ID                                            │
│    │  ┌─────────────────────────────────────────────┐      │
│    │  │ Ov23liAbCdEfGhIjKlMn                        │      │
│    │  └─────────────────────────────────────────────┘      │
│    │  → GitHub에서 복사한 Client ID 붙여넣기                 │
│    │                                                       │
│    │  Client Secret                                        │
│    │  ┌─────────────────────────────────────────────┐      │
│    │  │ ghp_xxxxxxxxxxxxxxxxxxxxxxxx                │      │
│    │  └─────────────────────────────────────────────┘      │
│    │  → GitHub에서 복사한 Client Secret 붙여넣기             │
│    │                                                       │
│    │  ┌─────────┐                                          │
│    │  │  Save   │  ← 클릭                                  │
│    │  └─────────┘                                          │
│    │                                                       │
│    └───────────────────────────────────────────────────────│
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 4: 테스트

1. `http://localhost:3000/auth/signin` 접속
2. "Continue with GitHub" 버튼 클릭
3. GitHub 로그인 및 권한 승인
4. 홈페이지로 리다이렉트되면 성공!

---

## 8. Google 로그인 설정 (선택)

Google 계정으로 로그인 기능을 추가합니다.

### Step 1: Google Cloud Console 접속

```
https://console.cloud.google.com
```

Google 계정으로 로그인합니다.

### Step 2: 프로젝트 만들기

상단에서 프로젝트 선택 드롭다운 클릭:

```
┌─────────────────────────────────────────────────────────────┐
│  Google Cloud    │ Select a project ▼ │                     │
├──────────────────┴────────────────────┴─────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  Select a project                              X    │    │
│  ├─────────────────────────────────────────────────────┤    │
│  │                                                     │    │
│  │  NEW PROJECT  ← 클릭                                │    │
│  │                                                     │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

프로젝트 이름 입력 후 "CREATE" 클릭

### Step 3: OAuth 동의 화면 설정

1. 왼쪽 메뉴: APIs & Services → OAuth consent screen

```
┌─────────────────────────────────────────────────────────────┐
│  OAuth consent screen                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  User Type                                                  │
│                                                             │
│  ○ Internal                                                 │
│    (Google Workspace 사용자만)                               │
│                                                             │
│  ● External  ← 이것 선택                                    │
│    (모든 Google 계정 사용자)                                  │
│                                                             │
│  ┌─────────┐                                                │
│  │ CREATE  │  ← 클릭                                        │
│  └─────────┘                                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

2. 앱 정보 입력:

```
┌─────────────────────────────────────────────────────────────┐
│  Edit app registration                                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  App name *                                                 │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ My App                                              │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  User support email *                                       │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ your-email@gmail.com                        ▼       │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  App logo (optional)                                        │
│  → 건너뛰기                                                  │
│                                                             │
│  App domain (optional)                                      │
│  → 건너뛰기                                                  │
│                                                             │
│  Developer contact information *                            │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ your-email@gmail.com                                │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  ┌─────────────────┐                                        │
│  │ SAVE AND CONTINUE │  ← 클릭                              │
│  └─────────────────┘                                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

3. Scopes, Test users 단계는 기본값으로 "SAVE AND CONTINUE" 클릭

### Step 4: OAuth 클라이언트 ID 만들기

1. 왼쪽 메뉴: APIs & Services → Credentials

2. "CREATE CREDENTIALS" → "OAuth client ID" 클릭

```
┌─────────────────────────────────────────────────────────────┐
│  Create OAuth client ID                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Application type *                                         │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ Web application                             ▼       │    │
│  └─────────────────────────────────────────────────────┘    │
│  → "Web application" 선택                                   │
│                                                             │
│  Name                                                       │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ My App Web Client                                   │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  Authorized JavaScript origins                              │
│  → 비워둬도 됨                                               │
│                                                             │
│  Authorized redirect URIs  ⚠️ 중요!                          │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ + ADD URI                                           │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  → "+ ADD URI" 클릭 후 입력:                                 │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ https://abcdefghijk.supabase.co/auth/v1/callback    │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 본인의 Supabase URL + /auth/v1/callback                  │
│                                                             │
│  ┌─────────┐                                                │
│  │ CREATE  │  ← 클릭                                        │
│  └─────────┘                                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 5: Client ID와 Secret 복사

생성 후 팝업에서:

```
┌─────────────────────────────────────────────────────────────┐
│  OAuth client created                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Your Client ID                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ 123456789-abcdefg.apps.googleusercontent.com    [📋]│    │
│  └─────────────────────────────────────────────────────┘    │
│  → 복사!                                                    │
│                                                             │
│  Your Client Secret                                         │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ GOCSPX-xxxxxxxxxxxxxxxxxxxxxxxx                 [📋]│    │
│  └─────────────────────────────────────────────────────┘    │
│  → 복사!                                                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Step 6: Supabase에 등록

1. Supabase 대시보드 → Authentication → Providers

2. Google 항목 확장

3. Enable 토글 ON

4. Client ID, Client Secret 붙여넣기

5. Save 클릭

### Step 7: 테스트

1. `http://localhost:3000/auth/signin` 접속
2. "Continue with Google" 버튼 클릭
3. Google 계정 선택 및 권한 승인
4. 홈페이지로 리다이렉트되면 성공!

---

## 9. 실서버 배포 시 설정

### 9.1 Vercel 환경 변수

Vercel에 배포할 때:

1. Vercel 대시보드 → 프로젝트 선택
2. Settings → Environment Variables
3. 변수 추가:

| Name | Value |
|------|-------|
| `NEXT_PUBLIC_SUPABASE_URL` | https://xxx.supabase.co |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | eyJhbG... |
| `SUPABASE_SERVICE_ROLE_KEY` | eyJhbG... |
| `NEXT_PUBLIC_APP_URL` | https://your-domain.com |

### 9.2 Supabase URL 설정 변경

1. Supabase 대시보드 → Authentication → URL Configuration

2. Site URL 변경:
```
┌─────────────────────────────────────────────────────────────┐
│  URL Configuration                                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Site URL                                                   │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ https://your-domain.com                             │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 실제 도메인으로 변경                                       │
│                                                             │
│  Redirect URLs                                              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ https://your-domain.com/**                          │    │
│  │ http://localhost:3000/**                            │    │
│  └─────────────────────────────────────────────────────┘    │
│  → 프로덕션 URL 추가, localhost는 개발용으로 유지              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 9.3 OAuth Callback URL 업데이트

GitHub, Google OAuth를 사용한다면:

1. **GitHub OAuth App** 설정에서:
   - Homepage URL → `https://your-domain.com`
   - Callback URL은 Supabase URL이므로 그대로 유지

2. **Google OAuth** 설정에서:
   - Authorized redirect URIs는 Supabase URL이므로 그대로 유지

---

## 10. 문제 해결

### 문제: "Invalid API key" 오류

**원인**: 환경 변수가 잘못됨

**해결**:
1. `.env.local` 파일 확인
2. API 키 앞뒤에 공백이나 따옴표가 없는지 확인
3. 개발 서버 재시작: `Ctrl+C` 후 `npm run dev`

### 문제: 회원가입 후 "User already registered" 오류

**원인**: 같은 이메일로 이미 가입됨

**해결**:
1. Supabase → Authentication → Users
2. 해당 사용자 삭제 후 다시 시도

### 문제: OAuth 로그인 후 에러 페이지

**원인**: Callback URL이 잘못됨

**해결**:
1. GitHub/Google OAuth 설정에서 Callback URL 확인
2. 형식: `https://[YOUR-PROJECT].supabase.co/auth/v1/callback`
3. 오타 없는지 확인 (특히 `v1` 부분)

### 문제: 프로필이 자동 생성되지 않음

**원인**: 트리거가 설정되지 않음

**해결**:
1. Supabase SQL Editor 열기
2. `supabase/schema.sql` 내용 다시 실행
3. 특히 `handle_new_user()` 함수와 트리거 확인

### 문제: "Email not confirmed" 오류

**원인**: 이메일 확인이 필요함

**해결 (개발용)**:
1. Authentication → Providers → Email
2. "Confirm email" 토글 OFF

**해결 (프로덕션)**:
- 이메일로 온 확인 링크 클릭

---

## 체크리스트

모든 설정이 완료되었는지 확인하세요:

- [ ] Supabase 계정 생성
- [ ] 새 프로젝트 생성
- [ ] API 키 3개 복사 (URL, anon key, service_role key)
- [ ] `.env.local` 파일 생성 및 설정
- [ ] `supabase/schema.sql` 실행
- [ ] 회원가입 테스트 성공
- [ ] 로그인 테스트 성공
- [ ] (선택) GitHub OAuth 설정
- [ ] (선택) Google OAuth 설정

---

## 도움이 필요하면

- [Supabase 공식 문서](https://supabase.com/docs)
- [Supabase Discord](https://discord.supabase.com)
- [GitHub Issues](https://github.com/supabase/supabase/issues)
